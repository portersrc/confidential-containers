<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>SEV-ES Guide &#8212; Confidential Containers  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=039e1c02" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Troubleshooting" href="troubleshooting.html" />
    <link rel="prev" title="Encrypted Container Images without Hardware Support" href="nontee_demo.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="sev-es-guide">
<h1>SEV-ES Guide<a class="headerlink" href="#sev-es-guide" title="Link to this heading">¶</a></h1>
<p>Confidential Containers supports SEV(-ES) with pre-attestation using
<a class="reference external" href="https://github.com/confidential-containers/simple-kbs">simple-kbs</a>.</p>
<p>This guide covers platform-specific setup for SEV(-ES) and walks through
complete flows for attestation and encrypted images.</p>
<section id="creating-a-coco-workload-using-a-pre-existing-encrypted-image-on-sev">
<h2>Creating a CoCo workload using a pre-existing encrypted image on SEV<a class="headerlink" href="#creating-a-coco-workload-using-a-pre-existing-encrypted-image-on-sev" title="Link to this heading">¶</a></h2>
<section id="platform-setup">
<h3>Platform Setup<a class="headerlink" href="#platform-setup" title="Link to this heading">¶</a></h3>
<p>To enable SEV on the host platform, first ensure that it is supported. Then follow these instructions to enable SEV:</p>
<p><a class="reference external" href="https://github.com/AMDESE/AMDSEV#prepare-host-os">AMD SEV - Prepare Host OS</a></p>
</section>
<section id="install-sevctl-and-export-sev-certificate-chain">
<h3>Install sevctl and Export SEV Certificate Chain<a class="headerlink" href="#install-sevctl-and-export-sev-certificate-chain" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/virtee/sevctl">sevctl</a> is the SEV command line utility and is needed to export the SEV certificate chain.</p>
<p>Follow these steps to install <code class="docutils literal notranslate"><span class="pre">sevctl</span></code>:</p>
<ul>
<li><p>Debian / Ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Rust must be installed to build
curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env
sudo apt install -y musl-dev musl-tools

# Additional packages are required to build
sudo apt install -y pkg-config libssl-dev asciidoctor

# Clone the repository
git clone https://github.com/virtee/sevctl.git

# Build
(cd sevctl &amp;&amp; cargo build)
</pre></div>
</div>
</li>
<li><p>CentOS / Fedora / RHEL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">sevctl</span>
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><p><strong>Note</strong> Due to <a class="reference external" href="https://bugzilla.redhat.com/show_bug.cgi?id=2037963">this bug</a> on sevctl for RHEL and Fedora you might need to build the tool from sources to pick the fix up.</p>
</div></blockquote>
<p>If using the SEV kata configuration template file, the SEV certificate chain must be placed in <code class="docutils literal notranslate"><span class="pre">/opt/sev</span></code>. Export the SEV certificate chain using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">sev</span>
<span class="n">sudo</span> <span class="o">./</span><span class="n">sevctl</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">sevctl</span> <span class="n">export</span> <span class="o">--</span><span class="n">full</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">sev</span><span class="o">/</span><span class="n">cert_chain</span><span class="o">.</span><span class="n">cert</span>
</pre></div>
</div>
</section>
<section id="setup-and-run-the-simple-kbs">
<h3>Setup and Run the simple-kbs<a class="headerlink" href="#setup-and-run-the-simple-kbs" title="Link to this heading">¶</a></h3>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">kata-qemu-sev</span></code> runtime class uses pre-attestation with the
<code class="docutils literal notranslate"><span class="pre">online-sev-kbc</span></code> and <a class="reference external" href="https://github.com/confidential-containers/simple-kbs">simple-kbs</a> to attest the guest and provision secrets.
<code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> is a basic prototype key broker which can validate a guest measurement according to a specified policy and conditionally release secrets.
To use encrypted images, signed images, or authenticated registries with SEV, you should setup <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code>.
If you simply want to run an unencrypted container image, you can disable pre-attestation by adding the following annotation
<code class="docutils literal notranslate"><span class="pre">io.katacontainers.config.pre_attestation.enabled:</span> <span class="pre">&quot;false&quot;</span></code> to your pod.</p>
<p>If you are using pre-attestation, you will need to add an annotation to your pod configuration which contains the URI of a <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> instance.
This annotation should be of the form <code class="docutils literal notranslate"><span class="pre">io.katacontainers.config.pre_attestation.uri:</span> <span class="pre">&quot;&lt;KBS</span> <span class="pre">IP&gt;:44444&quot;</span></code>.
Port 44444 is the default port per the directions below, but it may be configured to use another port.
The KBS IP must be accessible from inside the guest.
Usually it should be the public IP of the node where <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> runs.</p>
<p>The SEV policy can also be set by adding <code class="docutils literal notranslate"><span class="pre">io.katacontainers.config.sev.policy:</span> <span class="pre">&quot;&lt;SEV</span> <span class="pre">POLICY&gt;&quot;</span></code> to your pod configuration. The default policy for SEV and SEV-ES are, respectively, “3” and “7”, where the following bits are enabled:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>NODBG</p></td>
<td><p>Debugging of the guest is disallowed</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>NOKS</p></td>
<td><p>Sharing keys with other guests is disallowed</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>ES</p></td>
<td><p>SEV-ES is required</p></td>
</tr>
</tbody>
</table>
<p>For more information about SEV policy, see chapter 3 of the <a class="reference external" href="https://www.amd.com/system/files/TechDocs/55766_SEV-KM_API_Specification.pdf">Secure Encrypted Virtualization API</a> (PDF).</p>
<blockquote>
<div><p>Note: the SEV policy is not the same as the policies that drive <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code>.</p>
</div></blockquote>
<p>The CoCo project has created a sample encrypted container image (<a class="reference external" href="https://github.com/orgs/confidential-containers/packages/container/test-container/82546314?tag=encrypted">ghcr.io/confidential-containers/test-container:encrypted</a>). This image is encrypted using a key that comes already provisioned inside the <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> for ease of testing. No <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> policy is required to get things running.</p>
<p>The image encryption key and key for SSH access have been attached to the CoCo sample encrypted container image as docker labels. This image is meant for TEST purposes only as these keys are published publicly. In a production use case, these keys would be generated by the workload administrator and kept secret. For further details, see the section how to <a class="reference internal" href="#create-an-encrypted-image">Create an Encrypted Image</a>.</p>
<p>To learn more about creating custom policies, see the section on <a class="reference internal" href="#creating-a-simple-kbs-policy-to-verify-the-sev-guest-firmware-measurement">Creating a simple-kbs Policy to Verify the SEV Guest Firmware Measurement</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span></code> is required to run the <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> and its database in docker containers. Installation instructions are available on <a class="reference external" href="https://docs.docker.com/compose/install/linux/">Docker’s website</a>.</p>
<p>Clone the repository for specified tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simple_kbs_tag</span><span class="o">=</span><span class="s2">&quot;0.1.1&quot;</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">confidential</span><span class="o">-</span><span class="n">containers</span><span class="o">/</span><span class="n">simple</span><span class="o">-</span><span class="n">kbs</span><span class="o">.</span><span class="n">git</span>
<span class="p">(</span><span class="n">cd</span> <span class="n">simple</span><span class="o">-</span><span class="n">kbs</span> <span class="o">&amp;&amp;</span> <span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="s2">&quot;branch_$</span><span class="si">{simple_kbs_tag}</span><span class="s2">&quot;</span> <span class="s2">&quot;$</span><span class="si">{simple_kbs_tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Run the service with <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">cd</span> <span class="n">simple</span><span class="o">-</span><span class="n">kbs</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">docker</span> <span class="n">compose</span> <span class="n">up</span> <span class="o">-</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="launch-the-pod-and-verify-sev-encryption">
<h3>Launch the Pod and Verify SEV Encryption<a class="headerlink" href="#launch-the-pod-and-verify-sev-encryption" title="Link to this heading">¶</a></h3>
<p>Here is a sample kubernetes service yaml for an encrypted image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kind</span><span class="p">:</span> <span class="n">Service</span>
<span class="n">apiVersion</span><span class="p">:</span> <span class="n">v1</span>
<span class="n">metadata</span><span class="p">:</span>
  <span class="n">name</span><span class="p">:</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span>
<span class="n">spec</span><span class="p">:</span>
  <span class="n">selector</span><span class="p">:</span>
    <span class="n">app</span><span class="p">:</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span>
  <span class="n">ports</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">port</span><span class="p">:</span> <span class="mi">22</span>
<span class="o">---</span>
<span class="n">kind</span><span class="p">:</span> <span class="n">Deployment</span>
<span class="n">apiVersion</span><span class="p">:</span> <span class="n">apps</span><span class="o">/</span><span class="n">v1</span>
<span class="n">metadata</span><span class="p">:</span>
  <span class="n">name</span><span class="p">:</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span>
<span class="n">spec</span><span class="p">:</span>
  <span class="n">selector</span><span class="p">:</span>
    <span class="n">matchLabels</span><span class="p">:</span>
      <span class="n">app</span><span class="p">:</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span>
  <span class="n">template</span><span class="p">:</span>
    <span class="n">metadata</span><span class="p">:</span>
      <span class="n">labels</span><span class="p">:</span>
        <span class="n">app</span><span class="p">:</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span>
    <span class="n">spec</span><span class="p">:</span>
      <span class="n">runtimeClassName</span><span class="p">:</span> <span class="n">kata</span><span class="o">-</span><span class="n">qemu</span><span class="o">-</span><span class="n">sev</span>
      <span class="n">containers</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">ghcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">fitzthum</span><span class="o">/</span><span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span><span class="p">:</span><span class="n">encrypted</span>
        <span class="n">imagePullPolicy</span><span class="p">:</span> <span class="n">Always</span>
</pre></div>
</div>
<p>Save this service yaml to a file named <code class="docutils literal notranslate"><span class="pre">encrypted-image-tests.yaml</span></code>. Notice the image URL specified points to the previously described CoCo sample encrypted container image. <code class="docutils literal notranslate"><span class="pre">kata-qemu-sev</span></code> must also be specified as the <code class="docutils literal notranslate"><span class="pre">runtimeClassName</span></code>.</p>
<p>Start the service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kubectl</span> <span class="n">apply</span> <span class="o">-</span><span class="n">f</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>Check for pod errors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pod_name=$(kubectl get pod -o wide | grep encrypted-image-tests | awk &#39;{print $1;}&#39;)
kubectl describe pod ${pod_name}
</pre></div>
</div>
<p>If there are no errors, a CoCo encrypted container with SEV has been successfully launched!</p>
</section>
<section id="verify-sev-memory-encryption">
<h3>Verify SEV Memory Encryption<a class="headerlink" href="#verify-sev-memory-encryption" title="Link to this heading">¶</a></h3>
<p>The container <code class="docutils literal notranslate"><span class="pre">dmesg</span></code> report can be parsed to verify SEV memory encryption.</p>
<p>Get pod IP:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pod_ip=$(kubectl get pod -o wide | grep encrypted-image-tests | awk &#39;{print $6;}&#39;)
</pre></div>
</div>
<p>Get the CoCo sample encrypted container image SSH access key from docker image label and save it to a file.
Currently the docker client cannot pull encrypted images. We can inspect the unencrypted image instead,
which has the same labels. You could also use <code class="docutils literal notranslate"><span class="pre">skopeo</span> <span class="pre">inspect</span></code> to get the labels from the encrypted image.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">pull</span> <span class="n">ghcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">fitzthum</span><span class="o">/</span><span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span><span class="p">:</span><span class="n">unencrypted</span>
<span class="n">docker</span> <span class="n">inspect</span> <span class="n">ghcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">fitzthum</span><span class="o">/</span><span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span><span class="p">:</span><span class="n">unencrypted</span> <span class="o">|</span> \
  <span class="n">jq</span> <span class="o">-</span><span class="n">r</span> <span class="s1">&#39;.[0].Config.Labels.ssh_key&#39;</span> \
  <span class="o">|</span> <span class="n">sed</span> <span class="s2">&quot;s|\(-----BEGIN OPENSSH PRIVATE KEY-----\)|</span><span class="se">\1\n</span><span class="s2">|g&quot;</span> \
  <span class="o">|</span> <span class="n">sed</span> <span class="s2">&quot;s|\(-----END OPENSSH PRIVATE KEY-----\)|</span><span class="se">\n\1</span><span class="s2">|g&quot;</span> \
  <span class="o">&gt;</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span>
</pre></div>
</div>
<p>Set permissions on the SSH private key file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="mi">600</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span>
</pre></div>
</div>
<p>Run a SSH command to parse the container <code class="docutils literal notranslate"><span class="pre">dmesg</span></code> output for SEV enabled messages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ssh -i encrypted-image-tests \
  -o &quot;StrictHostKeyChecking no&quot; \
  -t root@${pod_ip} \
  &#39;dmesg | grep SEV&#39;
</pre></div>
</div>
<p>The output should look something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>    <span class="mf">0.150045</span><span class="p">]</span> <span class="n">Memory</span> <span class="n">Encryption</span> <span class="n">Features</span> <span class="n">active</span><span class="p">:</span> <span class="n">AMD</span> <span class="n">SEV</span>
</pre></div>
</div>
</section>
</section>
<section id="create-an-encrypted-image">
<h2>Create an Encrypted Image<a class="headerlink" href="#create-an-encrypted-image" title="Link to this heading">¶</a></h2>
<p>If SSH access to the container is desired, create a keypair:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span> <span class="o">-</span><span class="n">t</span> <span class="n">ed25519</span> <span class="o">-</span><span class="n">f</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span> <span class="o">-</span><span class="n">P</span> <span class="s2">&quot;&quot;</span> <span class="o">-</span><span class="n">C</span> <span class="s2">&quot;&quot;</span> <span class="o">&lt;&lt;&lt;</span> <span class="n">y</span>
</pre></div>
</div>
<p>The above command will save the keypair in a file named <code class="docutils literal notranslate"><span class="pre">encrypted-image-tests</span></code>.</p>
<p>Here is a sample Dockerfile to create a docker image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FROM</span> <span class="n">alpine</span><span class="p">:</span><span class="mf">3.16</span>

<span class="c1"># Update and install openssh-server</span>
<span class="n">RUN</span> <span class="n">apk</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">apk</span> <span class="n">upgrade</span> <span class="o">&amp;&amp;</span> <span class="n">apk</span> <span class="n">add</span> <span class="n">openssh</span><span class="o">-</span><span class="n">server</span>

<span class="c1"># Generate container ssh key</span>
<span class="n">RUN</span> <span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span> <span class="o">-</span><span class="n">t</span> <span class="n">ed25519</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">ssh_host_ed25519_key</span> <span class="o">-</span><span class="n">P</span> <span class="s2">&quot;&quot;</span>

<span class="c1"># A password needs to be set for login to work. An empty password is</span>
<span class="c1"># unproblematic as password-based login to root is not allowed.</span>
<span class="n">RUN</span> <span class="n">passwd</span> <span class="o">-</span><span class="n">d</span> <span class="n">root</span>

<span class="c1"># Copy the remote generated public key to the container authorized_keys</span>
<span class="c1"># Generate with &#39;ssh-keygen -t ed25519 -f encrypted-image-tests -P &quot;&quot; -C &quot;&quot;&#39;</span>
<span class="n">COPY</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span><span class="o">.</span><span class="n">pub</span> <span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">authorized_keys</span>

<span class="c1"># Entry point - run sshd</span>
<span class="n">ENTRYPOINT</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">sshd</span> <span class="o">-</span><span class="n">D</span>
</pre></div>
</div>
<p>Store this <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> in the same directory as the <code class="docutils literal notranslate"><span class="pre">encrypted-image-tests</span></code> ssh keypair.</p>
<p>Build image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">build</span> <span class="o">-</span><span class="n">t</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span> <span class="o">.</span>
</pre></div>
</div>
<p>Tag and upload this unencrypted docker image to a registry:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">tag</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span><span class="p">:</span><span class="n">latest</span> <span class="p">[</span><span class="n">REGISTRY_URL</span><span class="p">]:</span><span class="n">unencrypted</span>
<span class="n">docker</span> <span class="n">push</span> <span class="p">[</span><span class="n">REGISTRY_URL</span><span class="p">]:</span><span class="n">unencrypted</span>
</pre></div>
</div>
<p>Be sure to replace <code class="docutils literal notranslate"><span class="pre">[REGISTRY_URL]</span></code> with the desired registry URL.</p>
<p><a class="reference external" href="https://github.com/containers/skopeo">skopeo</a> is required to encrypt the container image. Follow the instructions here to install <code class="docutils literal notranslate"><span class="pre">skopeo</span></code>:</p>
<p><a class="reference external" href="https://github.com/containers/skopeo/blob/main/install.md">skopeo Installation</a></p>
<p>The Attestation Agent hosts a grpc service to support encrypting the image. Clone the repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">attestation_agent_tag</span><span class="o">=</span><span class="s2">&quot;v0.1.0&quot;</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">confidential</span><span class="o">-</span><span class="n">containers</span><span class="o">/</span><span class="n">attestation</span><span class="o">-</span><span class="n">agent</span><span class="o">.</span><span class="n">git</span>
<span class="p">(</span><span class="n">cd</span> <span class="n">attestation</span><span class="o">-</span><span class="n">agent</span> <span class="o">&amp;&amp;</span> <span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="s2">&quot;branch_$</span><span class="si">{attestation_agent_tag}</span><span class="s2">&quot;</span> <span class="s2">&quot;$</span><span class="si">{attestation_agent_tag}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Run the offline_fs_kbs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">cd</span> <span class="n">attestation</span><span class="o">-</span><span class="n">agent</span><span class="o">/</span><span class="n">sample_keyprovider</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">enc_mods</span><span class="o">/</span><span class="n">offline_fs_kbs</span> \
<span class="o">&amp;&amp;</span> <span class="n">cargo</span> <span class="n">run</span> <span class="o">--</span><span class="n">release</span> <span class="o">--</span><span class="n">features</span> <span class="n">offline_fs_kbs</span> <span class="o">--</span> <span class="o">--</span><span class="n">keyprovider_sock</span> <span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">50001</span> <span class="o">&amp;</span><span class="p">)</span>
</pre></div>
</div>
<p>Create the Attestation Agent keyprovider:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">&gt;</span> <span class="n">attestation</span><span class="o">-</span><span class="n">agent</span><span class="o">/</span><span class="n">sample_keyprovider</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">enc_mods</span><span class="o">/</span><span class="n">offline_fs_kbs</span><span class="o">/</span><span class="n">ocicrypt</span><span class="o">.</span><span class="n">conf</span> <span class="o">&lt;&lt;</span><span class="n">EOF</span>
<span class="p">{</span>
  <span class="s2">&quot;key-providers&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;attestation-agent&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;grpc&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1:50001&quot;</span>
<span class="p">}}}</span>
<span class="n">EOF</span>
</pre></div>
</div>
<p>Set a desired value for the encryption key that should be a 32-bytes and base64 encoded value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">enc_key</span><span class="o">=</span><span class="s2">&quot;RcHGava52DPvj1uoIk/NVDYlwxi0A6yyIZ8ilhEX3X4=&quot;</span>
</pre></div>
</div>
<p>Create a Key file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">&gt;</span> <span class="n">keys</span><span class="o">.</span><span class="n">json</span> <span class="o">&lt;&lt;</span><span class="n">EOF</span>
<span class="p">{</span>
    <span class="s2">&quot;key_id1&quot;</span><span class="p">:</span><span class="s2">&quot;$</span><span class="si">{enc_key}</span><span class="s2">&quot;</span>
<span class="p">}</span>
<span class="n">EOF</span>
</pre></div>
</div>
<p>Run skopeo to encrypt the image created in the previous section:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo OCICRYPT_KEYPROVIDER_CONFIG=$(pwd)/attestation-agent/sample_keyprovider/src/enc_mods/offline_fs_kbs/ocicrypt.conf \
skopeo copy --insecure-policy \
docker:[REGISTRY_URL]:unencrypted \
docker:[REGISTRY_URL]:encrypted \
--encryption-key provider:attestation-agent:$(pwd)/keys.json:key_id1
</pre></div>
</div>
<p>Again, be sure to replace <code class="docutils literal notranslate"><span class="pre">[REGISTRY_URL]</span></code> with the desired registry URL.
<code class="docutils literal notranslate"><span class="pre">--insecure-policy</span></code> flag is used to connect to the attestation agent and will not impact the security of the project.</p>
<p>Make sure to use the <code class="docutils literal notranslate"><span class="pre">docker</span></code> prefix in the source and destination URL when running the <code class="docutils literal notranslate"><span class="pre">skopeo</span> <span class="pre">copy</span></code> command as demonstrated above.
Utilizing images via the local <code class="docutils literal notranslate"><span class="pre">docker-daemon</span></code> is known to have issues, and the <code class="docutils literal notranslate"><span class="pre">skopeo</span> <span class="pre">copy</span></code> command does not return an adequate error
response. A remote registry known to support encrypted images like GitHub Container Registry (GHCR) is required.</p>
<p>At this point it is a good idea to inspect the image was really encrypted as skopeo can silently leave it unencrypted. Use
<code class="docutils literal notranslate"><span class="pre">skopeo</span> <span class="pre">inspect</span></code> as shown below to check that the layers MIME types are <strong>application/vnd.oci.image.layer.v1.tar+gzip+encrypted</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">skopeo</span> <span class="n">inspect</span> <span class="n">docker</span><span class="o">-</span><span class="n">daemon</span><span class="p">:[</span><span class="n">REGISTRY_URL</span><span class="p">]:</span><span class="n">encrypted</span>
</pre></div>
</div>
<p>Push the encrypted image to the registry:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">push</span> <span class="p">[</span><span class="n">REGISTRY_URL</span><span class="p">]:</span><span class="n">encrypted</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">mysql-client</span></code> is required to insert the key into the <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> database. <code class="docutils literal notranslate"><span class="pre">jq</span></code> is required to json parse responses on the command line.</p>
<ul>
<li><p>Debian / Ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">mysql</span><span class="o">-</span><span class="n">client</span> <span class="n">jq</span>
</pre></div>
</div>
</li>
<li><p>CentOS / Fedora / RHEL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="p">[</span> <span class="n">mysql</span> <span class="o">|</span> <span class="n">mariadb</span> <span class="o">|</span> <span class="n">community</span><span class="o">-</span><span class="n">mysql</span> <span class="p">]</span> <span class="n">jq</span>
</pre></div>
</div>
</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">mysql-client</span></code> package name may differ depending on OS flavor and version.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> uses default settings and credentials for the MySQL database. These settings can be changed by the <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> administrator and saved into a credential file. For the purposes of this quick start, set them in the environment for use with the MySQL client command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">KBS_DB_USER</span><span class="o">=</span><span class="s2">&quot;kbsuser&quot;</span>
<span class="n">KBS_DB_PW</span><span class="o">=</span><span class="s2">&quot;kbspassword&quot;</span>
<span class="n">KBS_DB</span><span class="o">=</span><span class="s2">&quot;simple_kbs&quot;</span>
<span class="n">KBS_DB_TYPE</span><span class="o">=</span><span class="s2">&quot;mysql&quot;</span>
</pre></div>
</div>
<p>Retrieve the host address of the MySQL database container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>KBS_DB_HOST=$(docker network inspect simple-kbs_default \
  | jq -r &#39;.[].Containers[] | select(.Name | test(&quot;simple-kbs[_-]db.*&quot;)).IPv4Address&#39; \
  | sed &quot;s|/.*$||g&quot;)
</pre></div>
</div>
<p>Add the key to the <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> database without any verification policy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mysql -u${KBS_DB_USER} -p${KBS_DB_PW} -h ${KBS_DB_HOST} -D ${KBS_DB} &lt;&lt;EOF
  REPLACE INTO secrets VALUES (10, &#39;key_id1&#39;, &#39;${enc_key}&#39;, NULL);
  REPLACE INTO keysets VALUES (10, &#39;KEYSET-1&#39;, &#39;[&quot;key_id1&quot;]&#39;, NULL);
EOF
</pre></div>
</div>
<p>The second value in the keysets table (<code class="docutils literal notranslate"><span class="pre">KEYSET-1</span></code>) must match the <code class="docutils literal notranslate"><span class="pre">guest_pre_attestation_keyset</span></code> value specified in the SEV kata configuration file located here:</p>
<p><code class="docutils literal notranslate"><span class="pre">/opt/confidential-containers/share/defaults/kata-containers/configuration-qemu-sev.toml</span></code></p>
<p>Return to step <a class="reference internal" href="#launch-the-pod-and-verify-sev-encryption">Launch the Pod and Verify SEV Encryption</a> and finish the remaining process. Make sure to change the <code class="docutils literal notranslate"><span class="pre">encrypted-image-tests.yaml</span></code> to reflect the new <code class="docutils literal notranslate"><span class="pre">[REGISTRY_URL]</span></code>.</p>
<p>To learn more about creating custom policies, see the section on <a class="reference internal" href="#creating-a-simple-kbs-policy-to-verify-the-sev-guest-firmware-measurement">Creating a simple-kbs Policy to Verify the SEV Guest Firmware Measurement</a>.</p>
</section>
<section id="creating-a-simple-kbs-policy-to-verify-the-sev-guest-firmware-measurement">
<h2>Creating a simple-kbs Policy to Verify the SEV Guest Firmware Measurement<a class="headerlink" href="#creating-a-simple-kbs-policy-to-verify-the-sev-guest-firmware-measurement" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> can be configured with a policy that requires the kata shim to provide a matching SEV guest firmware measurement to release the key for decrypting the image. At launch time, the kata shim will collect the SEV guest firmware measurement and forward it in a key request to the <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code>.</p>
<p>These steps will use the CoCo sample encrypted container image, but the image URL can be replaced with a user created image registry URL.</p>
<p>To create the policy, the value of the SEV guest firmware measurement must be calculated.</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span></code> is required to install the <code class="docutils literal notranslate"><span class="pre">sev-snp-measure</span></code> utility.</p>
<ul>
<li><p>Debian / Ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">pip</span>
</pre></div>
</div>
</li>
<li><p>CentOS / Fedora / RHEL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">python3</span>
</pre></div>
</div>
</li>
</ul>
<p><a class="reference external" href="https://github.com/IBM/sev-snp-measure">sev-snp-measure</a> is a utility used to calculate the SEV guest firmware measurement with provided ovmf, initrd, kernel and kernel append input parameters. Install it using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">sev</span><span class="o">-</span><span class="n">snp</span><span class="o">-</span><span class="n">measure</span>
</pre></div>
</div>
<p>The path to the guest binaries required for measurement is specified in the kata configuration. Set them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ovmf_path</span><span class="o">=</span><span class="s2">&quot;/opt/confidential-containers/share/ovmf/OVMF.fd&quot;</span>
<span class="n">kernel_path</span><span class="o">=</span><span class="s2">&quot;/opt/confidential-containers/share/kata-containers/vmlinuz-sev.container&quot;</span>
<span class="n">initrd_path</span><span class="o">=</span><span class="s2">&quot;/opt/confidential-containers/share/kata-containers/kata-containers-initrd.img&quot;</span>
</pre></div>
</div>
<p>The kernel append line parameters are included in the SEV guest firmware measurement. A placeholder will be initially set, and the actual value will be retrieved later from the qemu command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">append</span><span class="o">=</span><span class="s2">&quot;PLACEHOLDER&quot;</span>
</pre></div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">sev-snp-measure</span></code> utility to calculate the SEV guest firmware measurement using the binary variables previously set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>measurement=$(sev-snp-measure --mode=sev --output-format=base64 \
  --ovmf=&quot;${ovmf_path}&quot; \
  --kernel=&quot;${kernel_path}&quot; \
  --initrd=&quot;${initrd_path}&quot; \
  --append=&quot;${append}&quot; \
)
</pre></div>
</div>
<p>If the container image is not already present, pull it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">encrypted_image_url</span><span class="o">=</span><span class="s2">&quot;ghcr.io/fitzthum/encrypted-image-tests:unencrypted&quot;</span>
<span class="n">docker</span> <span class="n">pull</span> <span class="s2">&quot;$</span><span class="si">{encrypted_image_url}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Retrieve the encryption key from docker image label:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>enc_key=$(docker inspect ${encrypted_image_url} \
  | jq -r &#39;.[0].Config.Labels.enc_key&#39;)
</pre></div>
</div>
<p>Add the key, keyset and policy with measurement to the <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mysql -u${KBS_DB_USER} -p${KBS_DB_PW} -h ${KBS_DB_HOST} -D ${KBS_DB} &lt;&lt;EOF
  REPLACE INTO secrets VALUES (10, &#39;key_id1&#39;, &#39;${enc_key}&#39;, 10);
  REPLACE INTO keysets VALUES (10, &#39;KEYSET-1&#39;, &#39;[&quot;key_id1&quot;]&#39;, 10);
  REPLACE INTO policy VALUES (10, &#39;[&quot;${measurement}&quot;]&#39;, &#39;[]&#39;, 0, 0, &#39;[]&#39;, now(), NULL, 1);
EOF
</pre></div>
</div>
<p>Using the same service yaml from the section on <a class="reference internal" href="#launch-the-pod-and-verify-sev-encryption">Launch the Pod and Verify SEV Encryption</a>, launch the service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kubectl</span> <span class="n">apply</span> <span class="o">-</span><span class="n">f</span> <span class="n">encrypted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">tests</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>Check for pod errors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>pod_name=$(kubectl get pod -o wide | grep encrypted-image-tests | awk &#39;{print $1;}&#39;)
kubectl describe pod ${pod_name}
</pre></div>
</div>
<p>The pod will error out on the key retrieval request to the <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> because the policy verification failed due to a mismatch in the SEV guest firmware measurement. This is the error message that should display:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Policy</span> <span class="n">validation</span> <span class="n">failed</span><span class="p">:</span> <span class="n">fw</span> <span class="n">digest</span> <span class="ow">not</span> <span class="n">valid</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">PLACEHOLDER</span></code> value that was set for the kernel append line when the SEV guest firmware measurement was calculated does not match what was measured by the kata shim. The kernel append line parameters can be retrieved from the qemu command line using the following scripting commands, as long as kubernetes is still trying to launch the pod:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>duration=$((SECONDS+30))
set append

while [ $SECONDS -lt $duration ]; do
  qemu_process=$(ps aux | grep qemu | grep append || true)
  if [ -n &quot;${qemu_process}&quot; ]; then
    append=$(echo ${qemu_process} \
      | sed &quot;s|.*-append \(.*$\)|\1|g&quot; \
      | sed &quot;s| -.*$||&quot;)
    break
  fi
  sleep 1
done

echo &quot;${append}&quot;
</pre></div>
</div>
<p>The above check will only work if the <code class="docutils literal notranslate"><span class="pre">encrypted-image-tests</span></code> guest launch is the only consuming qemu process running.</p>
<p>Now, recalculate the SEV guest firmware measurement and store the <code class="docutils literal notranslate"><span class="pre">simple-kbs</span></code> policy in the database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>measurement=$(sev-snp-measure --mode=sev --output-format=base64 \
  --ovmf=&quot;${ovmf_path}&quot; \
  --kernel=&quot;${kernel_path}&quot; \
  --initrd=&quot;${initrd_path}&quot; \
  --append=&quot;${append}&quot; \
)

mysql -u${KBS_DB_USER} -p${KBS_DB_PW} -h ${KBS_DB_HOST} -D ${KBS_DB} &lt;&lt;EOF
  REPLACE INTO secrets VALUES (10, &#39;key_id1&#39;, &#39;${enc_key}&#39;, 10);
  REPLACE INTO keysets VALUES (10, &#39;KEYSET-1&#39;, &#39;[&quot;key_id1&quot;]&#39;, 10);
  REPLACE INTO policy VALUES (10, &#39;[&quot;${measurement}&quot;]&#39;, &#39;[]&#39;, 0, 0, &#39;[]&#39;, now(), NULL, 1);
EOF
</pre></div>
</div>
<p>The pod should now show a successful launch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>kubectl describe pod ${pod_name}
</pre></div>
</div>
<p>If the service is hung up, delete the pod and try to launch again:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Delete
kubectl delete -f encrypted-image-tests.yaml

# Verify pod cleaned up
kubectl describe pod ${pod_name}

# Relaunch
kubectl apply -f encrypted-image-tests.yaml
</pre></div>
</div>
<p>Testing the SEV encrypted container launch can be completed by returning to the section on how to <a class="reference internal" href="#verify-sev-memory-encryption">Verify SEV Memory Encryption</a>.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Confidential Containers</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html#running-a-workload">Running a workload</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Confidential Computing Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html#confidential-computing-building-blocks">Confidential Computing Building Blocks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html#cncf-confidential-containers">CNCF Confidential Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Confidential Containers Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html#short-term-roadmap">Short-Term Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html#mid-term-roadmap">Mid-Term Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html#longer-term-roadmap">Longer-Term Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alignment.html">Alignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="eaa_verdictd.html">EAA Verdictd Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="enclave-cc.html">Enclave-CC</a></li>
<li class="toctree-l2"><a class="reference internal" href="ephemeral_storage.html">Trusted Ephemeral Storage for container images</a></li>
<li class="toctree-l2"><a class="reference internal" href="nontee_demo.html">Encrypted Container Images without Hardware Support</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SEV-ES Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Guides stuff</a><ul>
      <li>Previous: <a href="nontee_demo.html" title="previous chapter">Encrypted Container Images without Hardware Support</a></li>
      <li>Next: <a href="troubleshooting.html" title="next chapter">Troubleshooting</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, confidential-containers-authors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/guides/sev.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>